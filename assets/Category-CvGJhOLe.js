import{a as m,u as g,j as e}from"./vendor-BgAWyjm8.js";import{P as N}from"./ProductCard-CpC24KkZ.js";import{F as S}from"./FeaturedProductShowcase-DGaFW9g9.js";import{S as o}from"./skeleton-vNwRW11z.js";import{d as P,e as C,p as E,q as b,s as k,v as L,w as l}from"./index-ChWiFecg.js";import"./currency-ByeFX4iW.js";import"./heart-D1C9vxA1.js";import"./plus-BSOfSnyd.js";import"./shopping-cart-Ju1GDCqn.js";function D(p,n){const i=[];switch(p){case"clothing":i.push({name:"Size",value:"Medium",type:"size"},{name:"Color",value:"Navy Blue",type:"color"},{name:"Material",value:"Cotton Blend",type:"material"},{name:"Style",value:"Casual",type:"default"});break;case"tableware":i.push({name:"Material",value:"Ceramic",type:"material"},{name:"Dimensions",value:'10" x 10"',type:"default"},{name:"Dishwasher Safe",value:"Yes",type:"default"},{name:"Set Size",value:"4 pieces",type:"default"});break;case"kitchen":i.push({name:"Material",value:"Stainless Steel",type:"material"},{name:"Dimensions",value:'12" x 8" x 4"',type:"default"},{name:"Dishwasher Safe",value:"Yes",type:"default"},{name:"Heat Resistant",value:"Up to 450Â°F",type:"default"});break;case"home-decor":i.push({name:"Material",value:"Ceramic & Wood",type:"material"},{name:"Dimensions",value:'8" x 6" x 10"',type:"default"},{name:"Color",value:"Beige",type:"color"},{name:"Style",value:"Modern Minimalist",type:"default"});break;default:i.push({name:"Condition",value:"New",type:"default"},{name:"In Store",value:"Available",type:"default"})}return i}function K({params:p}){var f;const{slug:n}=p;P();const i=C(),[h,y]=m.useState("default"),u=g({queryKey:[`/api/categories/${n}`],queryFn:async()=>{const s=await fetch(`/api/categories/${n}`);if(!s.ok)throw new Error("Failed to fetch category");return s.json()}});m.useEffect(()=>{u.isError&&console.error("Error loading category:",u.error)},[u.isError]);const a=u.data,v=u.isLoading,d=g({queryKey:[`/api/products/category/${a==null?void 0:a.id}`],queryFn:async()=>{const s=await fetch(`/api/products/category/${a==null?void 0:a.id}`);if(!s.ok)throw new Error("Failed to fetch products");return s.json()},enabled:!!(a!=null&&a.id)}),x=d.data,j=d.isLoading;m.useEffect(()=>{d.isError&&console.error("Error loading category products:",d.error)},[d.isError]),m.useEffect(()=>{a===null&&i("/not-found")},[a,i]);const c=(()=>{if(!x)return[];const s=[...x];switch(h){case"price-low-high":return s.sort((r,t)=>(r.discountPrice||r.price)-(t.discountPrice||t.price));case"price-high-low":return s.sort((r,t)=>(t.discountPrice||t.price)-(r.discountPrice||r.price));case"name-a-z":return s.sort((r,t)=>r.name.localeCompare(t.name));case"name-z-a":return s.sort((r,t)=>t.name.localeCompare(r.name));case"discount":return s.sort((r,t)=>{const w=r.discountPrice?(r.price-r.discountPrice)/r.price:0;return(t.discountPrice?(t.price-t.discountPrice)/t.price:0)-w});default:return s}})();return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[v?e.jsxs("div",{className:"mb-6",children:[e.jsx(o,{className:"h-10 w-1/4 mb-2"}),e.jsx(o,{className:"h-4 w-2/3"})]}):e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:a==null?void 0:a.name}),e.jsxs("p",{className:"text-gray-600",children:["Browse our collection of ",(f=a==null?void 0:a.name)==null?void 0:f.toLowerCase()]})]}),e.jsx("div",{className:"flex justify-end mb-6",children:e.jsxs(E,{value:h,onValueChange:y,children:[e.jsx(b,{className:"w-[180px]",children:e.jsx(k,{placeholder:"Sort by"})}),e.jsxs(L,{children:[e.jsx(l,{value:"default",children:"Featured"}),e.jsx(l,{value:"price-low-high",children:"Price: Low to High"}),e.jsx(l,{value:"price-high-low",children:"Price: High to Low"}),e.jsx(l,{value:"name-a-z",children:"Name: A to Z"}),e.jsx(l,{value:"name-z-a",children:"Name: Z to A"}),e.jsx(l,{value:"discount",children:"Biggest Discount"})]})]})}),j?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:Array(8).fill(0).map((s,r)=>e.jsxs("div",{className:"aspect-[4/3]",children:[e.jsx(o,{className:"w-full h-full rounded-lg"}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx(o,{className:"h-4 w-3/4"}),e.jsx(o,{className:"h-4 w-1/4"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(o,{className:"h-4 w-1/4"}),e.jsx(o,{className:"h-8 w-1/4"})]})]})]},r))}):c.length>0?e.jsxs(e.Fragment,{children:[n&&c.length>0&&e.jsx(S,{product:{...c[0],description:c[0].description||"Experience quality and style with this premium item from our collection."},properties:D(n,c[0])}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map(s=>e.jsx(N,{id:s.id,slug:s.slug,name:s.name,imageUrl:s.imageUrl,price:s.price,discountPrice:s.discountPrice,stockLevel:s.stockLevel,isNew:s.isNew},s.id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-xl font-medium mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600",children:"We couldn't find any products in this category."})]})]})}export{K as default};
